/*! ko.pagination - v0.1.0 - 2013-11-29
* Copyright (c) 2013 ; Licensed  */
ko.pagination=function(){var a={resultProperty:"Result",totalPagesProperty:"TotalPages",totalProperty:"Total"},b=function(b,c,d,e){var f=b,g=c,h=this,i=d||{},j=e||{};this.currentPage=ko.observable(1),this.TotalPages=ko.observable(0),this.firstPage=function(){h.changePage(1)},this.lastPage=function(){h.changePage(h.TotalPages())},this.hasMorePages=ko.computed(function(){return 0!==h.TotalPages()?h.currentPage()!==h.TotalPages():!1}),this.hasLessPages=ko.computed(function(){return 1!==h.currentPage()}),this.nextPage=function(){h.hasMorePages()&&h.changePage(h.currentPage()+1)},this.prevPage=function(){h.hasLessPages()&&h.changePage(h.currentPage()-1)},this.changePage=function(b){var c=null;c=jQuery.isFunction(i)?i():i,c.page=b,jQuery.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:f,data:JSON.stringify(c),success:function(c){c.TotalPages&&h.TotalPages(c.TotalPages),null==e?g(ko.mapping.fromJS(c)[a.resultProperty]()):g(ko.mapping.fromJS(c,j)[a.resultProperty]()),h.currentPage(b)}})},this.Pages=function(){var a=0,b=0,c=2;return a=h.currentPage()-c,1>a&&(b+=Math.abs(a),a=1),b=h.currentPage()+2+b,b>h.TotalPages()&&(b=h.TotalPages()),ko.utils.range(a,b)}};return{defaults:a,initialize:function(a,c){arguments.length>1&&b.call(a,c.dataUrl,c.dataSetter,c.parameters,c.mappings)}}}();